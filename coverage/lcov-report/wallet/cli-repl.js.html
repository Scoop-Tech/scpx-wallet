<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for wallet/cli-repl.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="..\prettify.css" />
    <link rel="stylesheet" href="..\base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(..\sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="..\index.html">All files</a> / <a href="index.html">wallet</a> cli-repl.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">25% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>19/76</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/19</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/12</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">27.14% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>19/70</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// Distributed under AGPLv3 license: see /LICENSE for terms. Copyright 2019 Dominic Morris.
&nbsp;
const repl = require('repl')
const colors = require('colors')
&nbsp;
const appStore = require('./store')
const utilsWallet = require('./utils')
const log = require('./cli-log')
&nbsp;
const swWallet = require('./svr-wallet/sw-wallet')
const swCreate = require('./svr-wallet/sw-create')
&nbsp;
const helpBanner = ' HELP '.bgCyan.white.bold + ' '
&nbsp;
const walletNewHelp = `${helpBanner}` +
    `.wn (wallet-new) - creates and persists in-memory a new wallet with new random seed values\n`.cyan.bold
&nbsp;
const walletInitHelp = `${helpBanner}` +
    `.wi (wallet-init) - recreates a wallet from supplied seed values\n`.cyan.bold +
    `\targ: --mpk      &lt;master private key&gt;  &lt;required&gt;  entropy for keygen and redux store (L1) encryption\n` +
    `\targ: --apk      &lt;active public key&gt;   &lt;required&gt;  entropy for keygen, and salt for redux store (L1) encryption\n`
&nbsp;
const walletConnectHelp = `${helpBanner}` +
    `.wc (wallet-connect) - connects to 3PBPs and populates tx and balance data for the loaded wallet\n`.cyan.bold
&nbsp;
const walletDumpHelp = `${helpBanner}` +
    `.wd (wallet-dump) - decrypts and dumps sub-asset key and addresses values from the loaded scoop wallet\n`.cyan.bold +
    `\targ: --mpk      &lt;master private key&gt;  &lt;required&gt;  (not required if config/wallet.js/CLI_SAVE_LOADED_WALLET_KEYS is set)\n` +
    `\targ: --apk      &lt;active public key&gt;   &lt;required&gt;  (not required if config/wallet.js/CLI_SAVE_LOADED_WALLET_KEYS is set)\n` +
    `\targ: --s        [string]              [optional]  restrict output to supplied asset symbol if supplied, e.g. "ETH" or "BTC"\n` +
    `\targ: --txs      [bool]                [optional]  dump address transactions (default: false)\n` +
    `\targ: --privkeys [bool]                [optional]  dump private keys (default: false)\n`
&nbsp;
const walletAddAddrHelp = `${helpBanner}` +
    `.waa (wallet-add-address) - adds a receive address for the specified asset\n`.cyan.bold +
    `\targ: --mpk      &lt;master private key&gt;  &lt;required&gt;  (not required if config/wallet.js/CLI_SAVE_LOADED_WALLET_KEYS is set)\n` +
    `\targ: --apk      &lt;active public key&gt;   &lt;required&gt;  (not required if config/wallet.js/CLI_SAVE_LOADED_WALLET_KEYS is set)\n` +
    `\targ: --s        [string]              &lt;required&gt;  the asset for which to to add an address, e.g. "ETH" or "BTC"\n`
&nbsp;
const walletSaveHelp = `${helpBanner}` +
    `.ws (wallet-save) - saves the loaded wallet in encrypted form to file\n`.cyan.bold +
    `\targ: --mpk      &lt;master private key&gt;  &lt;required&gt;  (not required if config/wallet.js/CLI_SAVE_LOADED_WALLET_KEYS is set)\n` +
    `\targ: --apk      &lt;active public key&gt;   &lt;required&gt;  (not required if config/wallet.js/CLI_SAVE_LOADED_WALLET_KEYS is set)\n` +
    `\targ: --n        [string]              &lt;required&gt;  a name for the saved wallet; the wallet can subsequently be loaded by this name\n` +
    `\targ: --f        [bool]                [optional]  overwrite (without warning) any existing file with the same name (default: false)\n`
&nbsp;
const walletLoadHelp = `${helpBanner}` +
    `.wl (wallet-load) - loads a previously saved wallet from file\n`.cyan.bold +
    `\targ: --mpk      &lt;master private key&gt;  &lt;required&gt;  the MPK used to generate and encrypt the saved wallet\n` +
    `\targ: --apk      &lt;active public key&gt;   &lt;required&gt;  the APK used to generate and encrypt the saved wallet\n` +
    `\targ: --n        [string]              &lt;required&gt;  the name of the saved wallet\n`
&nbsp;
&nbsp;
&nbsp;
const logTailHelp = `${helpBanner}` +
    `.lt (log-tail) - tails (doesn't follow) the last n lines of the debug log \n`.cyan.bold +
    `\targ: --n        [int]                 [optional]  number of lines to tail (default: 100)\n` +
    `\targ: --debug    [bool]                [optional]  tails the verbose (debug) log instead of the info log (default: false)\n`
&nbsp;
const clsHelp = `${helpBanner}` +
    `.cls (clear-scren) - clears the console screen \n`.cyan.bold
&nbsp;
const exitHelp = `${helpBanner}` +
    `.exit - terminates the wallet\n`.cyan.bold
&nbsp;
&nbsp;
module.exports = {
    repl_init: <span class="fstat-no" title="function not covered" >(w</span>alletContext, enableFileHistory) =&gt; {
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (utilsWallet.isParamTrue(enableFileHistory)) {</span>
<span class="cstat-no" title="statement not covered" >            log.warn('command history is being saved to file at ./node_history. This will include sensitive data.\n')</span>
        }
&nbsp;
        // init repl
        const colors = <span class="cstat-no" title="statement not covered" >{ RED: "31", GREEN: "32", YELLOW: "33", BLUE: "34", MAGENTA: "35", CYAN: "36" }</span>
        const colorize = <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(c</span>olor, s) =&gt; <span class="cstat-no" title="statement not covered" >`\x1b[${color}m${s}\x1b[0m`</span></span>
        const say = <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >me</span>ssage =&gt; <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >()</span> =&gt; <span class="cstat-no" title="statement not covered" >console.log(message)</span></span></span>
        const nodeVersion = <span class="cstat-no" title="statement not covered" >colorize(colors.GREEN, `${process.title} ${process.version}`)</span>
        const prompt = <span class="cstat-no" title="statement not covered" >repl.start({</span>
            terminal: true,
            historySize: 100,
            removeHistoryDuplicates: true,
            useGlobal: true,
            useColors: true,
            prompt: `${nodeVersion} SW-CLI &gt; `,
        })
&nbsp;
        // init file history
<span class="cstat-no" title="statement not covered" >        if (utilsWallet.isParamTrue(enableFileHistory)) {</span>
<span class="cstat-no" title="statement not covered" >            prompt.clearBufferedCommand()</span>
<span class="cstat-no" title="statement not covered" >            require('repl.history')(prompt, './.node_history')</span>
<span class="cstat-no" title="statement not covered" >            prompt.displayPrompt()</span>
        }
<span class="cstat-no" title="statement not covered" >        prompt.context.w = walletContext</span>
&nbsp;
        // custom commands
<span class="cstat-no" title="statement not covered" >        delete prompt.commands.save</span>
<span class="cstat-no" title="statement not covered" >        delete prompt.commands.break</span>
<span class="cstat-no" title="statement not covered" >        delete prompt.commands.clear</span>
<span class="cstat-no" title="statement not covered" >        delete prompt.commands.load</span>
<span class="cstat-no" title="statement not covered" >        delete prompt.commands.editor</span>
<span class="cstat-no" title="statement not covered" >        delete prompt.commands.history</span>
<span class="cstat-no" title="statement not covered" >        delete prompt.commands.exit</span>
<span class="cstat-no" title="statement not covered" >        prompt.commands.help.help += '\n'</span>
&nbsp;
        const defineWalletCmd = <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(p</span>rompt, name, help, fn, walletFnName) =&gt; {</span>
<span class="cstat-no" title="statement not covered" >            prompt.defineCommand(name, {</span>
                help,
                action: <span class="fstat-no" title="function not covered" >fu</span>nction (args) {
<span class="cstat-no" title="statement not covered" >                    prompt.clearBufferedCommand()</span>
                    var argv = <span class="cstat-no" title="statement not covered" >require('minimist')(args.split(' '))</span>
<span class="cstat-no" title="statement not covered" >                    if (argv.help) <span class="cstat-no" title="statement not covered" >postCmd(prompt, null, help)</span></span>
                    else {
                        //console.group()
<span class="cstat-no" title="statement not covered" >                        fn(walletContext.store, argv, walletFnName).then(<span class="fstat-no" title="function not covered" >re</span>s =&gt; <span class="cstat-no" title="statement not covered" >postCmd(prompt, res, help))</span></span>
                        //.finally(() =&gt; console.groupEnd())
                    }
                }
            })
        }
&nbsp;
        // wallet-new, new random MPK
<span class="cstat-no" title="statement not covered" >        defineWalletCmd(prompt, 'wn', walletNewHelp, swCreate.walletNew)</span>
&nbsp;
        // wallet-init, by supplied MPK
<span class="cstat-no" title="statement not covered" >        defineWalletCmd(prompt, 'wi', walletInitHelp, swCreate.walletInit)</span>
&nbsp;
        // wallet-connect, block/tx updates for all asset-types &amp; addr-monitors
<span class="cstat-no" title="statement not covered" >        defineWalletCmd(prompt, 'wc', walletConnectHelp, swWallet.walletFunction, 'CONNECT')</span>
&nbsp;
        // wallet-dump, decrypt &amp; dump values from redux store
<span class="cstat-no" title="statement not covered" >        defineWalletCmd(prompt, 'wd', walletDumpHelp, swWallet.walletFunction, 'DUMP')</span>
&nbsp;
        // wallet-add-address, creates a new receive address
<span class="cstat-no" title="statement not covered" >        defineWalletCmd(prompt, 'waa', walletAddAddrHelp, swWallet.walletFunction, 'ADD-ADDR')</span>
&nbsp;
        // wallet-save, saves a wallet to file
<span class="cstat-no" title="statement not covered" >        defineWalletCmd(prompt, 'ws', walletSaveHelp, swWallet.walletFunction, 'SAVE')</span>
&nbsp;
        // wallet-load, saves a wallet to file
<span class="cstat-no" title="statement not covered" >        defineWalletCmd(prompt, 'wl', walletLoadHelp, swWallet.walletFunction, 'LOAD')</span>
&nbsp;
&nbsp;
        // log-tail, show last n lines of verbose (debug) log
<span class="cstat-no" title="statement not covered" >        defineWalletCmd(prompt, 'lt', logTailHelp, log.logTail)</span>
&nbsp;
&nbsp;
&nbsp;
        // cls, clear console screen
<span class="cstat-no" title="statement not covered" >        defineWalletCmd(prompt, 'cls', clsHelp, <span class="fstat-no" title="function not covered" >as</span>ync () =&gt; {</span>
<span class="cstat-no" title="statement not covered" >            require('clear')()</span>
<span class="cstat-no" title="statement not covered" >            return { ok: true }</span>
        })
&nbsp;
        // exit, clear console screen
<span class="cstat-no" title="statement not covered" >        defineWalletCmd(prompt, 'exit', exitHelp, <span class="fstat-no" title="function not covered" >as</span>ync () =&gt; {</span>
<span class="cstat-no" title="statement not covered" >            process.exit(0)</span>
            //return { ok: true }
        })
&nbsp;
        // dbg, dump store state
        // prompt.defineCommand("drs", {
        //     help: "dbg - dump redux store",
        //     action: function (args) {
        //         this.clearBufferedCommand()
        //         console.dir(appStore.store.getState())
        //         setTimeout(() =&gt; {
        //             this.displayPrompt()
        //         }, 100)
        //     }
        // })
&nbsp;
<span class="cstat-no" title="statement not covered" >        return prompt</span>
    },
&nbsp;
    postCmd: <span class="fstat-no" title="function not covered" >(p</span>rompt, res, help) =&gt; {
<span class="cstat-no" title="statement not covered" >        postCmd(prompt, res, help)</span>
    }
}
&nbsp;
function <span class="fstat-no" title="function not covered" >postCmd(</span>prompt, res, help) {
<span class="cstat-no" title="statement not covered" >    setTimeout(<span class="fstat-no" title="function not covered" >()</span> =&gt; {</span>
<span class="cstat-no" title="statement not covered" >        if (!res || res.err) {</span>
<span class="cstat-no" title="statement not covered" >            if (res) <span class="cstat-no" title="statement not covered" >log.error(res.err)</span></span>
<span class="cstat-no" title="statement not covered" >            if (help) {</span>
<span class="cstat-no" title="statement not covered" >                console.log()</span>
<span class="cstat-no" title="statement not covered" >                log.info(help)</span>
            }
        }
        else {
<span class="cstat-no" title="statement not covered" >            log.success(`${JSON.stringify(res.ok, null, 2)}`)</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (global.loadedWalletKeys &amp;&amp; global.loadedWalletKeys.mpk &amp;&amp; global.loadedWalletKeys.apk) {</span>
<span class="cstat-no" title="statement not covered" >            log.warn('the wallet MPK &amp; APK are being cached in-memory (CLI_SAVE_LOADED_WALLET_KEYS == true)')</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        prompt.displayPrompt()</span>
    }, 100) // https://github.com/nodejs/node/issues/11568
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Wed May 01 2019 14:30:49 GMT+0800 (Singapore Standard Time)
</div>
</div>
<script src="..\prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="..\sorter.js"></script>
</body>
</html>
